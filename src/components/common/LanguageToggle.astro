---
import { Icon } from "astro-icon/components";
import type { Locale } from "@/i18n";

interface Props {
	locale?: Locale;
}

const { locale = "en" } = Astro.props as Props;

const path = Astro.url.pathname;

const suffix = path.replace(/^\/(en|es)(?=\/|$)/, "") || "";

const otherLocale: Locale = locale === "en" ? "es" : "en";
const otherPath = `/${otherLocale}${suffix}`;

const qs = Astro.url.searchParams.toString();
const hash = Astro.url.hash ?? "";

const otherHref = `${otherPath}${qs ? `?${qs}` : ""}${hash}`;
---

<a
	href={otherHref}
	class="inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2 text-xs font-semibold text-slate-700 shadow-sm transition hover:bg-white dark:border-zinc-800/70 dark:bg-zinc-950/30 dark:text-zinc-200 dark:hover:bg-zinc-900/60"
	aria-label={locale === "en" ? "Cambiar a EspaÃ±ol" : "Switch to English"}
	data-lang={otherLocale}
>
	<Icon name="languages" class="h-4.5 w-4.5" />
	<span class="tracking-wide">{otherLocale.toUpperCase()}</span>
</a>
