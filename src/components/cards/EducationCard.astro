---
import { Icon } from "astro-icon/components";
import { t, type Locale } from "@/i18n";

interface Education {
	degree: string;
	institution: string;
	location: string;
	startDate: string;
	endDate: string;
	description: string;
	notes?: string;
	skills?: string[];
}

const { education, locale = "en" } = Astro.props as {
	education: Education;
	locale?: Locale;
};

const dateLabel = `${education.startDate} – ${education.endDate}`;
---

<article
	class="rounded-3xl border border-slate-200 bg-white p-5 shadow-sm transition-all duration-300 hover:border-purple-400/60 hover:shadow-md dark:border-zinc-800 dark:bg-zinc-900/40 dark:hover:border-purple-500/50"
>
	<header
		class="flex flex-col gap-3 md:flex-row md:items-start md:justify-between"
	>
		<div class="flex min-w-0 items-start gap-3">
			<span
				class="mt-0.5 grid h-11 w-11 flex-none place-items-center rounded-2xl bg-purple-50 text-purple-700 ring-1 ring-slate-200 dark:bg-purple-500/10 dark:text-purple-200 dark:ring-zinc-800/70"
			>
				<Icon name="graduation-cap" class="h-5 w-5" />
			</span>

			<div class="min-w-0">
				<h2
					class="text-lg font-semibold wrap-break-word text-slate-900 dark:text-zinc-50"
				>
					{education.degree}
				</h2>

				<div class="mt-1 flex flex-wrap items-center gap-x-2 gap-y-1 text-sm">
					<div class="flex items-center gap-2">
						<Icon
							name="building-2"
							class="h-4 w-4 text-slate-400 dark:text-zinc-400"
						/>
						<p class="font-semibold text-purple-600 dark:text-purple-300">
							{education.institution}
						</p>
					</div>

					<span class="text-slate-300 dark:text-zinc-700">•</span>

					<div class="flex items-center gap-2">
						<Icon
							name="map-pin"
							class="h-4 w-4 text-slate-400 dark:text-zinc-400"
						/>
						<p class="text-slate-600 dark:text-zinc-300">
							{education.location}
						</p>
					</div>
				</div>
			</div>
		</div>

		<span
			class="inline-flex w-fit items-center gap-2 rounded-full border border-purple-200 bg-purple-50 px-3 py-1 text-xs font-semibold text-purple-700 md:mt-1 dark:border-purple-500/20 dark:bg-purple-500/10 dark:text-purple-200"
		>
			<Icon name="calendar" class="h-4 w-4" />
			{dateLabel}
		</span>
	</header>

	{
		education.description ? (
			<p class="mt-3 text-sm leading-relaxed text-slate-700 dark:text-zinc-200">
				{education.description}
			</p>
		) : null
	}

	{
		education.notes ? (
			<div class="mt-4 rounded-2xl border border-slate-200 bg-slate-50 p-4 dark:border-zinc-800/70 dark:bg-zinc-950/30">
				<div class="flex items-center gap-2 text-sm text-slate-700 dark:text-zinc-200">
					<span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-emerald-50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-200">
						<Icon name="sparkles" class="h-4 w-4" />
					</span>
					<p class="min-w-0">
						<span class="font-semibold">
							{t(locale, "educationCard.gradeLabel")}
						</span>{" "}
						{education.notes}
					</p>
				</div>
			</div>
		) : null
	}

	{
		education.skills && education.skills.length > 0 ? (
			<div class="mt-4 flex flex-wrap gap-2">
				{education.skills.map((skill) => (
					<span class="rounded-full border border-slate-200 bg-white px-3 py-1 text-[11px] font-semibold text-slate-700 dark:border-zinc-800/70 dark:bg-zinc-900/40 dark:text-zinc-200">
						{skill}
					</span>
				))}
			</div>
		) : null
	}
</article>
