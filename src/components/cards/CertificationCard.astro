---
import { Icon } from "astro-icon/components";
import { t, type Locale } from "@/i18n";

interface Certification {
	name: string;
	provider: string;
	year: string;
	icon: string;
	credentialId?: string;
	url?: string;
	skills?: string[];
}

const { certification, locale = "en" } = Astro.props as {
	certification: Certification;
	locale?: Locale;
};

const hasUrl = Boolean(certification.url);
---

<article
	class="group relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-5 shadow-sm transition-all duration-300 hover:border-purple-400/60 hover:shadow-md dark:border-zinc-800 dark:bg-zinc-900/40 dark:hover:border-purple-500/50"
>
	<div
		aria-hidden="true"
		class="pointer-events-none absolute top-6 right-6 opacity-10 dark:opacity-10"
	>
		<Icon
			name="graduation-cap"
			class="h-16 w-16 text-slate-900 dark:text-white"
		/>
	</div>

	<div class="relative flex flex-wrap items-center gap-x-3 gap-y-1">
		<div class="inline-flex items-center gap-2">
			<span
				class="grid h-10 w-10 place-items-center rounded-2xl bg-purple-50 text-purple-700 ring-1 ring-slate-200 dark:bg-purple-500/10 dark:text-purple-200 dark:ring-zinc-800/70"
			>
				<Icon name={certification.icon} class="h-5 w-5" />
			</span>

			<div class="leading-tight">
				<p
					class="text-[11px] font-extrabold tracking-[0.22em] text-purple-600 dark:text-purple-300"
				>
					{certification.provider?.toUpperCase?.() ?? certification.provider}
				</p>
				<p class="text-xs text-slate-500 dark:text-zinc-400">
					{certification.year}
				</p>
			</div>
		</div>
	</div>

	<h2
		class="relative mt-4 text-lg leading-snug font-semibold text-slate-900 dark:text-zinc-50"
	>
		{certification.name}
	</h2>

	{
		certification.credentialId ? (
			<p class="relative mt-2 text-xs text-slate-500 dark:text-zinc-400">
				<span class="font-semibold text-slate-600 dark:text-zinc-300">
					{t(locale, "certificationCard.idLabel")}
				</span>{" "}
				<span class="break-all">{certification.credentialId}</span>
			</p>
		) : null
	}

	{
		certification.skills && certification.skills.length > 0 ? (
			<div class="relative mt-4 flex flex-wrap gap-2">
				{certification.skills.map((skill) => (
					<span class="rounded-full border border-slate-200 bg-white px-3 py-1 text-[11px] font-semibold text-slate-700 dark:border-zinc-800/70 dark:bg-zinc-900/40 dark:text-zinc-200">
						{skill}
					</span>
				))}
			</div>
		) : null
	}

	{
		hasUrl ? (
			<div class="relative mt-5">
				<a
					href={certification.url}
					target="_blank"
					rel="noreferrer"
					class="inline-flex w-full items-center justify-center gap-2 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 shadow-sm transition hover:border-purple-300 hover:text-purple-700 dark:border-zinc-800/70 dark:bg-zinc-900/40 dark:text-zinc-200 dark:hover:border-purple-500/40 dark:hover:text-purple-200"
				>
					<Icon name="badge-check" class="h-5 w-5" />
					{t(locale, "certificationCard.viewCredential")}
				</a>
			</div>
		) : null
	}
</article>
