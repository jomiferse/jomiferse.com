---
import BaseLayout from "@/layouts/BaseLayout.astro";
import cv from "@/data/cv.json";
import ExperienceCard from "@/components/cards/ExperienceCard.astro";
import { Icon } from "astro-icon/components";
import { getLocaleFromPath, t } from "@/i18n";

const locale = getLocaleFromPath(Astro.url.pathname);

const experience = cv.experience ?? [];

const pageTitle = `${t(locale, "experience.meta.title")} â€“ ${cv.name}`;
const pageDescription =
	t(locale, "experience.meta.description").replace("{name}", cv.name);
---

<BaseLayout title={pageTitle} description={pageDescription}>
	<header class="mb-7 space-y-3">
		<h1 class="text-3xl font-bold md:text-4xl">
			{t(locale, "experience.hero.titlePrefix")}{" "}
			<span class="text-purple-600 dark:text-purple-300">
				{t(locale, "experience.hero.titleHighlight")}
			</span>
		</h1>
		<p
			class="max-w-2xl text-sm text-slate-600 md:text-base dark:text-slate-300"
		>
			{t(locale, "experience.hero.subtitle")}
		</p>
	</header>

	<ol class="relative space-y-6 border-s border-slate-200 ps-10 dark:border-zinc-800">
		{
			experience.map((exp) => (
				<li class="relative">
					<span class="absolute -start-14 top-5 grid h-9 w-9 place-items-center rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-zinc-800 dark:bg-zinc-950">
						<Icon
							name="briefcase"
							class="h-4 w-4 text-slate-500 dark:text-zinc-300"
						/>
					</span>

					<ExperienceCard experience={exp} locale={locale} />
				</li>
			))
		}
	</ol>
</BaseLayout>
