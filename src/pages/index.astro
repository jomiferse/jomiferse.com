---
import BaseLayout from "@/layouts/BaseLayout.astro";
import SkillTag from "@/components/SkillTag";
import { Image } from "astro:assets";
import avatar from "@/assets/avatar.avif";
import cv from "@/data/cv.json";

// Build skill buckets from JSON
const languages = cv.skills.languages;
const frameworks = [
	...cv.skills.backendMicroservices,
	...cv.skills.frontend,
	...cv.skills.otherFrameworks,
];
const tools = [
	...cv.skills.databases,
	...cv.skills.messagingStreaming,
	...cv.skills.identitySecurity,
	...cv.skills.toolsDevOps,
];
---

<BaseLayout title={`${cv.name} â€“ Software Engineer`} description={cv.headline}>
	{/* HERO */}
	<header
		class="mb-10 flex flex-col gap-6 md:mb-12 md:flex-row md:items-center md:justify-between"
	>
		<div class="space-y-3">
			<h1 class="text-3xl font-bold md:text-4xl">
				Hey! I&apos;m
				<span class="text-purple-600 dark:text-purple-300">
					{" "}
					{cv.name}
				</span>
			</h1>

			<h2 class="text-xl text-slate-600 md:text-2xl dark:text-slate-300">
				Software Engineer
			</h2>

			<p
				class="max-w-2xl text-sm leading-relaxed text-slate-600 md:text-base dark:text-slate-400"
			>
				{cv.headline}
			</p>
		</div>

		<div
			class="mt-2 flex flex-col items-center gap-4 text-sm text-slate-700 md:mt-0 md:items-end dark:text-slate-300"
		>
			<Image
				src={avatar}
				alt={`Portrait of ${cv.name}`}
				width={240}
				height={240}
				loading={"eager"}
				quality={100}
				class="h-24 w-24 rounded-full border border-slate-200 object-cover shadow-sm md:h-28 md:w-28 dark:border-slate-700"
			/>

			<div class="space-y-1 text-center md:text-right">
				<p>ğŸ‡ªğŸ‡¸ {cv.location}</p>
				<p class="font-medium">{cv.currentRole}</p>
				<p class="text-xs text-slate-500 dark:text-slate-400">
					{cv.focus}
				</p>
			</div>
		</div>
	</header>

	{/* About me */}
	<section id="about" class="mt-6 space-y-4 md:mt-8 md:space-y-5">
		<h2 class="text-2xl font-semibold text-purple-600 dark:text-purple-300">
			About me
		</h2>
		<div
			class="space-y-3 text-sm leading-relaxed text-slate-700 md:text-base dark:text-slate-200"
		>
			{cv.summary.map((para) => <p>{para}</p>)}
		</div>
	</section>

	{/* Skills */}
	<section id="skills" class="mt-10 space-y-5 pt-8 md:mt-12">
		<h2 class="text-2xl font-semibold text-purple-600 dark:text-purple-300">
			Skills
		</h2>

		<div
			class="grid gap-8 text-sm text-slate-700 md:grid-cols-3 md:text-base dark:text-slate-200"
		>
			<div class="space-y-2">
				<h3 class="font-semibold text-slate-900 dark:text-slate-100">
					â˜• Languages
				</h3>
				<div class="flex flex-wrap gap-2">
					{
						languages.map((skill) => (
							<SkillTag className="text-xs md:text-sm" client:load>
								{skill}
							</SkillTag>
						))
					}
				</div>
			</div>

			<div class="space-y-2">
				<h3 class="font-semibold text-slate-900 dark:text-slate-100">
					âš™ï¸ Backend &amp; Frameworks
				</h3>
				<div class="flex flex-wrap gap-2">
					{
						frameworks.map((skill) => (
							<SkillTag className="text-xs md:text-sm" client:load>
								{skill}
							</SkillTag>
						))
					}
				</div>
			</div>

			<div class="space-y-2">
				<h3 class="font-semibold text-slate-900 dark:text-slate-100">
					â˜ï¸ Databases, Messaging &amp; DevOps
				</h3>
				<div class="flex flex-wrap gap-2">
					{
						tools.map((skill) => (
							<SkillTag className="text-xs md:text-sm" client:load>
								{skill}
							</SkillTag>
						))
					}
				</div>
			</div>
		</div>

		<div
			class="mt-8 grid gap-8 text-sm text-slate-700 md:grid-cols-2 md:text-base dark:text-slate-200"
		>
			<div class="space-y-2">
				<h3 class="font-semibold text-slate-900 dark:text-slate-100">
					ğŸ’¡ Soft skills
				</h3>
				<div class="flex flex-wrap gap-2">
					{
						cv.skills.soft.map((skill) => (
							<SkillTag className="text-xs md:text-sm" client:load>
								{skill}
							</SkillTag>
						))
					}
				</div>
			</div>
			<div class="space-y-2">
				<h3 class="font-semibold text-slate-900 dark:text-slate-100">
					ğŸŒ Languages
				</h3>
				<ul class="space-y-1 text-sm">
					{
						cv.languagesSpoken.map((lang) => (
							<li>
								<strong>{lang.language}:</strong> {lang.level}
							</li>
						))
					}
				</ul>
			</div>
		</div>
	</section>

	{/* Contact */}
	<section id="contact" class="mt-10 space-y-4 pt-8 md:mt-12">
		<h2 class="text-2xl font-semibold text-purple-600 dark:text-purple-300">
			Contact
		</h2>
		<div
			class="space-y-3 text-sm leading-relaxed text-slate-700 md:text-base dark:text-slate-200"
		>
			<p>If you want to talk about opportunities, projects or collaboration:</p>
			<ul class="space-y-1 text-sm">
				<li>
					Email:
					<a
						href="mailto:jomiferse@gmail.com"
						class="ml-1 text-purple-600 underline dark:text-purple-300"
					>
						jomiferse@gmail.com
					</a>
				</li>
				<li>
					GitHub:
					<a
						href="https://github.com/jomiferse"
						class="ml-1 text-purple-600 underline dark:text-purple-300"
						target="_blank"
					>
						@jomiferse
					</a>
				</li>
				<li>
					LinkedIn:
					<a
						href="https://www.linkedin.com/in/jomiferse"
						class="ml-1 text-purple-600 underline dark:text-purple-300"
						target="_blank"
					>
						/in/jomiferse
					</a>
				</li>
			</ul>
		</div>
	</section>
</BaseLayout>
